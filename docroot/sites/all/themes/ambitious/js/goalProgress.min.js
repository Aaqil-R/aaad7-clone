/*
 *  Tinacious Design goalProgress jQuery plugin
 *  Plugin URL: https://github.com/tinacious/goalProgress
 *
 *  Christina Holly (Tinacious Design)
 *  http://tinaciousdesign.com
 *
 */
(function($) {
    $.fn.extend({
        goalProgress: function(options) {
            var defaults = {
                goalAmount: 100,
                currentAmount: 50,
                speed: 1E3,
                textBefore: "",
                textAfter: ""
            };
            var options = $.extend(defaults, options);
            return this.each(function() {
                var obj = $(this);
                var goalAmountParsed = parseInt(defaults.goalAmount);
                var currentAmountParsed = parseInt(defaults.currentAmount);
                var percentage = currentAmountParsed / goalAmountParsed * 100;
                var progressBar = '<div id="count" class="progressBar">'
                    + '<div class="gained-amount">' 
                    + defaults.textBefore 
                    + currentAmountParsed 
                    + '</div>'
                    + '<div class="gained-text">'
                    + defaults.textAfter 
                    + '</div>'
                    +"</div>";
                var progressBarWrapped =
                    '<div class="goalProgress">' + progressBar + "</div><div class='goal-amount'>£" + goalAmountParsed + "</div>";
                obj.append(progressBarWrapped);
                var rendered = obj.find("div.progressBar");
                rendered.each(function() {
                    //$(this).html($(this).text().replace(/\s/g, "&nbsp;"))
                });
                rendered.animate({
                    height: percentage + "%"
                }, defaults.speed)
            })
        }
    })
})(jQuery);

(function($) {
    $.fn.extend({
        goalProgress_landscape: function(options) {
            var defaults = {
                goalAmount: 100,
                currentAmount: 50,
                speed: 1E3,
                textBefore: "",
                textAfter: ""
            };
            var options = $.extend(defaults, options);
            return this.each(function() {
                var obj = $(this);
                var goalAmountParsed = parseInt(defaults.goalAmount);
                var currentAmountParsed = parseInt(defaults.currentAmount);
                var percentage = currentAmountParsed / goalAmountParsed * 100;
                var progressBar = '<div id="count" class="progressBar">'
                    + '<div class="gained-amount">' 
                    + defaults.textBefore 
                    + currentAmountParsed 
                    + '</div>'
                    + '<div class="gained-text">'
                    + defaults.textAfter 
                    + '</div>'
                    +"</div>";
                var progressBarWrapped =
                    '<div class="goalProgress">' + progressBar + "</div><div class='goal-amount'>£" + goalAmountParsed + "</div>";
                obj.append(progressBarWrapped);
                var rendered = obj.find("div.progressBar");
                rendered.each(function() {
                    //$(this).html($(this).text().replace(/\s/g, "&nbsp;"))
                });
                rendered.animate({
                    width: percentage + "%"
                }, defaults.speed)
            })
        }
    })
})(jQuery);

